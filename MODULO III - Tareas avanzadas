âœ… PrÃ¡ctica 1 â€“ ConfiguraciÃ³n GRUB2 y RecuperaciÃ³n de ContraseÃ±a Root
ðŸ”§ Modificar el tiempo de espera del GRUB2

Editar archivo de configuraciÃ³n:

sudo vim /etc/default/grub


Cambiar la lÃ­nea:

GRUB_TIMEOUT=20


Aplicar cambios al GRUB:

sudo grub2-mkconfig -o /boot/grub2/grub.cfg


Verificar:

grep '^GRUB_TIMEOUT' /etc/default/grub

ðŸ” RecuperaciÃ³n de contraseÃ±a root mediante rd.break

En el menÃº GRUB â†’ presionar e

En la lÃ­nea que comienza con linux, aÃ±adir al final:

rd.break


Iniciar con Ctrl + X

En el shell de emergencia:

mount -o remount,rw /sysroot
chroot /sysroot
passwd root
touch /.autorelabel
exit
exit


Iniciar sesiÃ³n:

su -

âœ… PrÃ¡ctica 2 â€“ Shell Scripting
ðŸ“Œ Script backup.sh (Backup con fecha/hora)

Crear script:

vim backup.sh


Contenido:

#!/bin/bash
date=$(date +"%d-%m-%Y_%H-%M")
user=$(whoami)

mkdir -p ~/back_up

if [ "$user" != "root" ]; then
    tar -cf /home/${user}/back_up/${date}.tar /home/${user}/* &>/dev/null && echo -e "\n[+] Backup realizado...\n"
else
    tar -cf /root/back_up/${date}.tar /root/* &>/dev/null && echo -e "\n[+] Backup realizado...\n"
fi


Permisos:

chmod +x backup.sh


Ejecutar:

./backup.sh


Extraer:

tar -xf ~/back_up/<archivo.tar>

ðŸ“Œ Script ifconfig.sh (Guardar salida en el Escritorio)

Crear script:

vim ifconfig.sh


Contenido:

#!/bin/bash

ifconfig=$(ifconfig)

echo -e "\n[i] Introduzca el nombre del archivo:"
read name

touch ~/Desktop/${name}
echo "$ifconfig" > ~/Desktop/${name}

echo -e "\n[+] Archivo creado en ~/Desktop/${name}\n"


Permisos:

chmod +x ifconfig.sh


Ejecutar:

./ifconfig.sh

âœ… PrÃ¡ctica 3 â€“ Redes y SSH
ðŸŒ ComprobaciÃ³n de red desde Windows
ping 10.0.0.148

ðŸ”§ Habilitar SSH en RHEL
sudo systemctl enable sshd --now
sudo systemctl status sshd

ðŸ—ï¸ ConexiÃ³n SSH desde Windows
ssh r20241244@10.0.0.148


En la VM:

whoami
ip a

ðŸ”‘ Generar llaves SSH en Windows
ssh-keygen

ðŸ“¤ Copiar llave pÃºblica al servidor
A) Si tienes ssh-copy-id:
ssh-copy-id -i C:\Users\TU_USER\.ssh\id_ed25519.pub r20241244@10.0.0.148

B) MÃ©todo manual con SCP:
scp C:\Users\TU_USER\.ssh\id_ed25519.pub r20241244@10.0.0.148:/home/r20241244/


En la VM:

mkdir -p ~/.ssh
cat ~/id_ed25519.pub >> ~/.ssh/authorized_keys
chmod 700 ~/.ssh
chmod 600 ~/.ssh/authorized_keys
rm ~/id_ed25519.pub

ðŸ§ª Probar acceso sin contraseÃ±a
ssh r20241244@10.0.0.148
